(this.webpackJsonpeccbibleplan=this.webpackJsonpeccbibleplan||[]).push([[0],{248:function(e,t,a){},407:function(e,t){},430:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),l=a.n(o),c=a(24),s=a(25),i=(a(248),a(468)),u=a(149),m=a.n(u),p={palette:{primary:{light:"#33c9dc",main:"#00bcd4",dark:"#008394",contrastText:"#fff"},secondary:{light:"#ff6333",main:"#ff3d00",dark:"#b22a00",contrastText:"#fff"}},typography:{useNextVariants:!0},rootStyles:{form:{textAlign:"center"},image:{margin:"20px auto 20px auto"},pageTitle:{margin:"10px auto 10px auto"},textField:{margin:"10px auto 10px auto"},button:{marginTop:20,position:"relative"},customError:{color:"red",fontSize:"0.8rem",marginTop:10},progress:{position:"absolute"},invisibleSeparator:{border:"none",margin:4},visibleSeparator:{width:"100%",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",marginBottom:20},paper:{padding:20},profile:{"& .image-wrapper":{textAlign:"center",position:"relative","& button":{position:"absolute",top:"80%",left:"70%"}},"& .profile-image":{width:200,height:200,objectFit:"cover",maxWidth:"100%",borderRadius:"50%"},"& .profile-details":{textAlign:"center","& span, svg":{verticalAlign:"middle"},"& a":{color:"#00bcd4"}},"& hr":{border:"none",margin:"0 0 10px 0"},"& svg.button":{"&:hover":{cursor:"pointer"}}},buttons:{textAlign:"center","& a":{margin:"20px 10px"}},closeButton:{position:"absolute",right:"0.2rem",top:"0.4rem"}}},d=a(23),h=a.n(d),f=a(11),b=a(71),E=a(210),g=a(73),v=a(6),y="SET_AUTHENTICATED",k="SET_UNAUTHENTICATED",O="SET_USER",C="LOADING_USER",j="MARK_NOTIFCATIONS_READ",w="SET_ERRORS",N="LOADING_DATA",I="LOADING_UI",A="CLEAR_ERRORS",S="STOP_LOADING_UI",T="SET_ANNOUNCEMENTS",x="SET_ANNOUNCEMENT",U="APPEND_IMAGEURL_TO_ANNOUNCEMENT",D="LIKE_ANNOUNCEMENT",W="UNLIKE_ANNOUNCEMENT",P="DELETE_ANNOUNCEMENT",F="POST_ANNOUNCEMENT",M="SUBMIT_COMMENT",R={authenticated:!1,credentials:{},likes:[],notifications:[],loading:!1},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(v.a)(Object(v.a)({},e),{},{authenticated:!0});case k:return R;case O:return Object(v.a)({loading:!1,authenticated:!0},t.payload);case C:return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case D:return Object(v.a)(Object(v.a)({},e),{},{taskCompletions:[].concat(Object(g.a)(e.taskCompletions),[{userHandle:e.credentials.handle,taskId:t.payload.taskId}])});case W:return Object(v.a)(Object(v.a)({},e),{},{taskCompletions:e.taskCompletions.filter((function(e){return e.taskId!==t.payload.taskId}))});case j:return e.notifications.forEach((function(e){return e.read=!0})),Object(v.a)({},e);default:return e}},B={tasks:[],task:{},loading:!1},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case T:var a=t.payload.filter((function(e){return!!e.pinToTop})),n=t.payload.filter((function(e){return!e.pinToTop}));return Object(v.a)(Object(v.a)({},e),{},{tasks:[].concat(Object(g.a)(a),Object(g.a)(n)),loading:!1});case x:return Object(v.a)(Object(v.a)({},e),{},{task:t.payload});case U:return Object(v.a)(Object(v.a)({},e),{},{task:Object(v.a)(Object(v.a)({},e.task),{},{body:"".concat(e.task.body,"\n\n![](").concat(t.payload,")")})});case D:case W:var r=e.tasks.findIndex((function(e){return e.taskId===t.payload.taskId}));return e.tasks[r]=t.payload,e.task.taskId===t.payload.taskId&&(e.task=Object(v.a)(Object(v.a)({},e.task),t.payload)),Object(v.a)({},e);case P:var o=e.tasks.findIndex((function(e){return e.taskId===t.payload}));return e.tasks.splice(o,1),Object(v.a)({},e);case F:return Object(v.a)(Object(v.a)({},e),{},{tasks:[t.payload].concat(Object(g.a)(e.tasks))});case M:return Object(v.a)(Object(v.a)({},e),{},{task:Object(v.a)(Object(v.a)({},e.task),{},{comments:[t.payload].concat(Object(g.a)(e.task.comments))})});default:return e}},L={loading:!1,errors:null},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){default:return e;case w:return Object(v.a)(Object(v.a)({},e),{},{loading:!1,errors:t.payload});case A:return Object(v.a)(Object(v.a)({},e),{},{loading:!1,errors:null});case I:return Object(v.a)(Object(v.a)({},e),{},{loading:!0});case S:return Object(v.a)(Object(v.a)({},e),{},{loading:!1})}},K=[E.a],J=Object(b.c)({user:z,data:G,UI:V});var Y=b.d,q=Object(b.e)(J,{},Y(b.a.apply(void 0,K))),H=a(64),Q=function(e){h.a.defaults.headers.common.Authentication="Bearer ".concat(e)},Z=function(){return function(e){e({type:C}),h.a.get("/user").then((function(t){e({type:O,payload:t.data})})).catch((function(t){console.log(t),e({type:w,payload:t.response.data})}))}},X=a(13),_=a(14),$=a(16),ee=a(15),te=a(469),ae=a(470),ne=a(18),re=a.n(ne),oe=a(485),le=a(463),ce=function(e){var t=e.children,a=e.onClick,n=e.tip,o=e.btnClassName,l=e.tipClassName;return r.a.createElement(oe.a,{title:n,placement:"top",className:l},r.a.createElement(le.a,{onClick:a,className:o},t))},se=a(157),ie=a.n(se),ue=a(28),me=function(){return function(e){e({type:N}),h.a.get("/tasks").then((function(t){e({type:T,payload:t.data.map((function(e){return Object(v.a)(Object(v.a)({},e),{},{taskId:e.taskId})}))})})).catch((function(t){e({type:T,payload:[]})}))}},pe=function(e){return function(t){t({type:I}),h.a.get("/task/".concat(e)).then((function(e){t({type:x,payload:Object(v.a)(Object(v.a)({},e.data),{},{taskId:e.data.taskId})}),t({type:S})})).catch((function(e){console.log(e)}))}},de=function(){return function(e){e({type:A})}},he=a(434),fe=a(466),be=a(486),Ee=a(465),ge=a(464),ve=a(467),ye=a(212),ke=a.n(ye),Oe=a(84),Ce=a.n(Oe),je=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1,body:"",errors:{}},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.props.clearErrors(),e.setState({open:!1,errors:{}})},e.handleChange=function(t){e.setState(Object(ue.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.postTask({body:e.state.body})},e}return Object(_.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){e.UI.errors&&this.setState({errors:e.UI.errors}),e.UI.errors||e.UI.loading||this.setState({body:"",open:!1})}},{key:"render",value:function(){var e=this.state.errors,t=this.props,a=t.classes,o=t.UI.loading;return r.a.createElement(n.Fragment,null,r.a.createElement(ce,{onClick:this.handleOpen,tip:"Post an Task!"},r.a.createElement(ke.a,null)),r.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"md"},r.a.createElement(ce,{tip:"Close",onClick:this.handleClose,tipClassName:a.closeButton},r.a.createElement(Ce.a,null)),r.a.createElement(ge.a,null,"Post a new task"),r.a.createElement(Ee.a,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(fe.a,{name:"body",type:"text",label:"Content",multiline:!0,placeholder:"Task content with markdown",error:!!e.body,helperText:e.body,className:a.textField,onChange:this.handleChange,fullWidth:!0,rows:"6",rowsMax:"12"}),r.a.createElement(he.a,{type:"submit",variant:"contained",color:"primary",className:a.submitButton,disabled:o},"Submit",o&&r.a.createElement(ve.a,{size:30,className:a.progressSpinner}))))))}}]),a}(n.Component),we=Object(f.b)((function(e){return{UI:e.UI}}),{postTask:function(e){return function(t){t({type:I}),h.a.post("/task",e).then((function(e){t({type:F,payload:Object(v.a)(Object(v.a)({},e.data),{},{taskId:e.data.taskId})}),t(de())})).catch((function(e){t({type:w,payload:e.response.data})}))}},clearErrors:de})(re()((function(e){return Object(v.a)(Object(v.a)({},e.rootStyles),{},{submitButton:{margin:"10px auto 10px auto",position:"relative",float:"right"},progressSpinner:{position:"absolute"}})}))(je)),Ne=a(213),Ie=a.n(Ne),Ae=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(X.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props,t=e.authenticated,a=e.isAnnouncementProvider;return r.a.createElement(te.a,null,r.a.createElement(ae.a,{className:"nav-container"},t?r.a.createElement(n.Fragment,null,a?r.a.createElement(we,null):r.a.createElement("div",null),r.a.createElement(c.b,{to:"/"},r.a.createElement(ce,{tip:"Home"},r.a.createElement(ie.a,null)))):r.a.createElement(n.Fragment,null,r.a.createElement(c.b,{to:"/login"},r.a.createElement(ce,{tip:"Account login"},r.a.createElement(Ie.a,null))),r.a.createElement(c.b,{to:"/"},r.a.createElement(ce,{tip:"Home"},r.a.createElement(ie.a,null))))))}}]),a}(n.Component),Se=Object(f.b)((function(e){return{authenticated:e.user.authenticated,isAnnouncementProvider:e.user.credentials.isAnnouncementProvider}}))(re()({})(Ae)),Te=a(230),xe=Object(f.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,a=e.authenticated,n=Object(Te.a)(e,["component","authenticated"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(s.a,{to:"/"}):r.a.createElement(t,e)}}))})),Ue=a(56),De=a.n(Ue),We=a(214),Pe=a.n(We),Fe=a(2),Me=a(85),Re=a.n(Me),ze=a(216),Be=a.n(ze),Ge=a(215),Le=a.n(Ge),Ve=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).state={open:!1,oldPath:"",newPath:"",errors:{},body:""},n.handleOpen=function(){var e=window.location.pathname,t=n.props,a=t.userHandle,r=t.taskId,o="/users/".concat(a,"/task/").concat(r);e===o&&(e="/users/".concat(a)),window.history.pushState(null,null,o),n.setState({open:!0,oldPath:e,newPath:o}),n.props.getTask(n.props.taskId)},n.handleClose=function(){window.history.pushState(null,null,n.state.oldPath),n.setState({open:!1}),n.props.clearErrors()},n.handleSubmit=function(e){e.preventDefault(),n.props.updateTask(n.props.taskId,n.state.body)},n.handleChange=function(e){n.setState(Object(ue.a)({},e.target.name,e.target.value))},n.handleImageChange=function(e){var t=e.target.files[0],a=new FormData;a.append("image",t,t.name),n.props.uploadImageForPost(n.props.taskId,a)},n.handleEditPicture=function(){n.imageButtonRef.current.click()},n.imageButtonRef=r.a.createRef(),n}return Object(_.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){e.UI.errors&&this.setState({errors:e.UI.errors}),e.task.body&&this.setState({body:e.task.body})}},{key:"componentDidMount",value:function(){this.props.openDialog&&this.handleOpen()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,o=this.state,l=o.body,c=o.errors,s=a?r.a.createElement("div",{className:t.spinnerDiv},r.a.createElement(ve.a,{size:200})):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Le.a,{name:"body",type:"text",label:"Content",multiline:!0,placeholder:"Task content with markdown",error:!!c.body,helperText:c.body,className:t.textField,onChange:this.handleChange,fullWidth:!0,value:l,rows:"6",rowsMax:"12"}),r.a.createElement("input",{type:"file",id:"imageInput",hidden:"hidden",onChange:this.handleImageChange,ref:this.imageButtonRef}),r.a.createElement(he.a,{variant:"contained",color:"primary",className:t.toolButton,disabled:a,onClick:this.handleEditPicture},r.a.createElement(Be.a,null)),r.a.createElement(he.a,{type:"submit",variant:"contained",color:"primary",className:t.submitButton,disabled:a},"Submit",a&&r.a.createElement(ve.a,{size:30,className:t.progressSpinner})));return r.a.createElement(n.Fragment,null,r.a.createElement(ce,{onClick:this.handleOpen,tip:"Edit task",tipClassName:t.expandButton},r.a.createElement(Re.a,{color:"primary"})),r.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"md"},r.a.createElement(ce,{tip:"Close",onClick:this.handleClose,tipClassName:t.closeButton},r.a.createElement(Ce.a,null)),r.a.createElement(Ee.a,{className:t.dialogContent},s)))}}]),a}(n.Component),Ke=Object(f.b)((function(e){return{task:e.data.task,UI:e.UI}}),{getTask:pe,updateTask:function(e,t){return function(a){a({type:I}),h.a.post("/task/".concat(e),{body:t}).then((function(){a(me())})).catch((function(e){a({type:w,payload:e.response.data})}))}},uploadImageForPost:function(e,t){return function(a){a({type:C}),h.a.post("/task/".concat(e,"/image"),t).then((function(e){a({type:U,payload:e.data.imageUrl})})).catch((function(e){return console.log(e)}))}},clearErrors:de})(re()((function(e){return Object(v.a)(Object(v.a)({},e.rootStyles),{},{avatar:{height:"80%",width:"80%"},dialogContent:{padding:20},expandButton:{float:"right"},spinnerDiv:{textAlign:"center",marginTo:50,marginBottom:50},submitButton:{margin:"10px auto 10px auto",position:"relative",float:"right"},toolButton:{margin:"10px auto 10px auto",position:"relative",float:"left"}})}))(Ve)),Je=a(471),Ye=a(217),qe=a.n(Ye),He=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.deleteAnnouncement=function(){e.props.deleteAnnouncement(e.props.taskId),e.handleClose()},e}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(ce,{tip:"Delete Task",onClick:this.handleOpen,btnClassName:e.deleteButton},r.a.createElement(qe.a,{color:"primary"})),r.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm"},r.a.createElement(ge.a,null,"Are you sure you want to delete this announcement?"),r.a.createElement(Je.a,null,r.a.createElement(he.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.deleteTask,color:"secondary"},"Delete"))))}}]),a}(n.Component),Qe=Object(f.b)(null,{deleteTask:function(e){return function(t){h.a.delete("/task/".concat(e)).then((function(){t({type:P,payload:e})})).catch((function(e){return console.log(e)}))}}})(re()({})(He)),Ze=a(229),Xe=a(472),_e=a(218),$e=a.n(_e),et=a(115),tt=a.n(et),at=Object(Xe.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},tipClassName:{}}})),nt=function(e){var t=e.src,a=at(),o=Object(n.useState)(!1),l=Object(Ze.a)(o,2),c=l[0],s=l[1],i=function(){s(!1)},u=Object(n.useRef)(null);return r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{onClick:function(e){e.preventDefault(),s(!0)}},t),r.a.createElement(be.a,{fullScreen:!0,open:c,onClose:i},r.a.createElement(te.a,{className:a.appBar},r.a.createElement(ae.a,null,r.a.createElement(oe.a,{title:"Return to home",placement:"top",className:a.tipClassName},r.a.createElement(le.a,{edge:"start",color:"inherit",onClick:i,"aria-label":"close"},r.a.createElement(tt.a,null))),r.a.createElement(oe.a,{title:"Reload task link",placement:"top",className:a.tipClassName},r.a.createElement(le.a,{edge:"start",color:"inherit",onClick:function(){u.current.contentWindow.location=t},"aria-label":"main link"},r.a.createElement($e.a,null))))),r.a.createElement("iframe",{ref:u,src:t,width:"100%",height:"100%",id:t,title:t})))},rt=a(487),ot=a(476),lt=a(477),ct=a(479),st=a(74),it=a(475),ut=a(219),mt=a.n(ut),pt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleOpen=function(){e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e.archiveTask=function(){e.props.archiveTask(e.props.taskId),e.handleClose()},e}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(ce,{tip:"Archive Task",onClick:this.handleOpen,btnClassName:e.archiveButton},r.a.createElement(mt.a,{color:"primary"})),r.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm"},r.a.createElement(ge.a,null,"Are you sure you want to archive this task?"),r.a.createElement(Je.a,null,r.a.createElement(he.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.archiveTask,color:"secondary"},"Archive"))))}}]),a}(n.Component),dt=Object(f.b)(null,{archiveTask:function(e){return function(t){h.a.post("/task/".concat(e),{isArchived:!0}).then((function(){t(me())})).catch((function(e){t({type:w,payload:e.response.data})}))}}})(re()({})(pt)),ht=a(116),ft=a.n(ht);function bt(e){return e.match(/^[0-9]+\. /)||e.match(/^\* /)}function Et(e){if(!e)return e;var t="",a="";return e.split("\n").forEach((function(e){var n=e.trim();!bt(a)&&bt(n)&&(t+="\n"),t=(t=(t=(t+=n).replace(/\u3002/g," \u3002")).replace(/\uff09/g," \uff09 ")).replace(/\uff08/g," \uff08 "),t+="\n",a=n})),t}var gt=a(478),vt=a(220),yt=a.n(vt),kt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleShare=function(){var t=e.props,a=t.taskId,n={title:"ECC Bible",text:t.content,url:"".concat("/eccbibleplan","#/task/").concat(a)};try{navigator.share(n),console.log("Shared successfully")}catch(r){console.log("Share failed")}},e.canShare=function(){try{return navigator.canShare}catch(e){return!1}},e}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props.classes;return this.canShare()?r.a.createElement("div",null,r.a.createElement(ce,{onClick:this.handleShare,tip:"Share task",tipClassName:e.expandButton},r.a.createElement(yt.a,{color:"primary"}))):null}}]),a}(n.Component),Ot=re()((function(e){return Object(v.a)({},e.rootStyles)}))(kt),Ct=a(473),jt=a(221),wt=a.n(jt),Nt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(X.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props,t=e.comments,a=e.classes;return r.a.createElement(Ct.a,{container:!0},t&&t.map((function(e,o){var l=e.body,s=e.createdAt,i=e.userImage,u=e.userHandle;return r.a.createElement(n.Fragment,{key:s},r.a.createElement(Ct.a,{item:!0,sm:12},r.a.createElement(Ct.a,{container:!0},r.a.createElement(Ct.a,{item:!0,sm:1},r.a.createElement(rt.a,{alt:u,src:i,className:a.avatar})),r.a.createElement(Ct.a,{item:!0,sm:9},r.a.createElement("div",{className:a.commentData},r.a.createElement(st.a,{component:c.b,to:"/users/".concat(u),color:"primary"},u),r.a.createElement(st.a,{variant:"body2",color:"textSecondary"},De()(s).format("h:mm a, MMMM DD YYYY")),r.a.createElement("hr",{className:a.invisibleSeparator}),r.a.createElement(st.a,{variant:"body1"},l))))),o!==t.length-1&&r.a.createElement("hr",{className:a.visibleSeparator}))})))}}]),a}(n.Component),It=Object(f.b)((function(e){return{task:e.data.task,UI:e.UI}}))(re()((function(e){return Object(v.a)(Object(v.a)({},e.rootStyles),{},{commentData:{marginLeft:20}})}))(Nt)),At=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={body:"",errors:{}},e.handleChange=function(t){e.setState(Object(ue.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.submitComment(e.props.taskId,{body:e.state.body})},e}return Object(_.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){e.UI.errors!==this.state.errors&&this.setState({errors:e.UI.errors?e.UI.errors:{}}),e.UI.errors||e.UI.loading||this.setState({body:""})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.authenticated,n=this.state.errors;return a?r.a.createElement(Ct.a,{item:!0,sm:12,style:{textAlign:"center"}},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(fe.a,{name:"body",type:"text",label:"Comment on task",error:!!n.error,helperText:n.error,value:this.state.body,onChange:this.handleChange,fullWidth:!0,className:t.textField}),r.a.createElement(he.a,{type:"submit",variant:"contained",color:"primary",className:t.button},"Submit")),r.a.createElement("hr",{className:t.visibleSeparator})):null}}]),a}(n.Component),St=Object(f.b)((function(e){return{UI:e.UI,authenticated:e.user.authenticated}}),{submitComment:function(e,t){return function(a){h.a.post("/task/".concat(e,"/comment"),t).then((function(e){a({type:M,payload:e.data}),a(de())})).catch((function(e){a({type:w,payload:e.response.data})}))}}})(re()((function(e){return Object(v.a)({},e.rootStyles)}))(At)),Tt=a(474),xt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.handleOpen=function(){e.setState({open:!0}),e.props.getTask(e.props.taskId)},e.handleClose=function(){window.history.pushState(null,null,e.state.oldPath),e.setState({open:!1}),e.props.clearErrors()},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){this.props.openDialog&&this.handleOpen()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.task,o=a.body,l=a.createdAt,s=a.userImage,i=a.userHandle,u=a.taskId,m=a.commentCount,p=a.comments,d=e.UI.loading?r.a.createElement("div",{className:t.spinnerDiv},r.a.createElement(ve.a,{size:200})):r.a.createElement(Ct.a,{container:!0},r.a.createElement(Ct.a,{item:!0,sm:1,className:t.avatarContainer},r.a.createElement(rt.a,{alt:i,src:s,className:t.avatar})),r.a.createElement(Ct.a,{item:!0,sm:!0},r.a.createElement(st.a,{component:c.b,color:"primary",variant:"h6",to:"/users/".concat(i)},"@",i),r.a.createElement("hr",{className:t.invisibleSeparator}),r.a.createElement(st.a,{variant:"body2",color:"textSecondary"},De()(l).format("h:mm a, MMMM DD YYYY"))),r.a.createElement("div",{className:t.markdownContainer},r.a.createElement("hr",{className:t.invisibleSeparator}),r.a.createElement(ft.a,{source:Et(o)})),r.a.createElement(Tt.a,null,r.a.createElement(ce,{tip:"comments"},r.a.createElement(wt.a,{color:"primary"})),r.a.createElement("span",null,m," comments")),r.a.createElement("hr",{className:t.visibleSeparator}),r.a.createElement(St,{taskId:u}),r.a.createElement(It,{comments:p}));return r.a.createElement(n.Fragment,null,r.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"md"},r.a.createElement(ce,{tip:"Close",onClick:this.handleClose,tipClassName:t.closeButton},r.a.createElement(Ce.a,null)),r.a.createElement(Ee.a,{className:t.dialogContent},d)))}}]),a}(n.Component),Ut=Object(f.b)((function(e){return{task:e.data.task,UI:e.UI}}),{getTask:pe,clearErrors:de})(re()((function(e){return Object(v.a)(Object(v.a)({},e.rootStyles),{},{dialogContent:{padding:20},closeButton:{position:"absolute",right:"0.6rem",top:"0.6rem"},spinnerDiv:{textAlign:"center",marginTo:50,marginBottom:50},markdownContainer:{display:"block",width:"100%",overflow:"hidden"},avatar:{width:"4rem",height:"4rem"}})}))(xt)),Dt=a(222),Wt=a.n(Dt),Pt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={open:!1},e.togglePinToTop=function(){var t=e.props,a=t.taskId,n=t.pinToTop;e.props.pinTask(a,!n)},e}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(ce,{tip:"Pin Task to Top",onClick:this.togglePinToTop,btnClassName:e.pinToTop},r.a.createElement(Wt.a,{color:this.props.pinToTop?"secondary":"primary"})))}}]),a}(n.Component),Ft=Object(f.b)(null,{pinTask:function(e,t){return function(a){h.a.post("/task/".concat(e),{pinToTop:t}).then((function(){a(me())})).catch((function(e){a({type:w,payload:e.response.data})}))}}})(re()({})(Pt)),Mt=a(158),Rt=a.n(Mt),zt=a(223),Bt=a.n(zt),Gt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).taskCompleted=function(){return!(!e.props.user.taskCompletions||!e.props.user.taskCompletions.find((function(t){return t.taskId===e.props.taskId})))},e.completeTask=function(){e.props.completeTask(e.props.taskId)},e.undoCompleteTask=function(){e.props.undoCompleteTask(e.props.taskId)},e}return Object(_.a)(a,[{key:"render",value:function(){return this.props.user.authenticated?this.taskCompleted()?r.a.createElement(ce,{tip:"Undo Complete",onClick:this.undoCompleteTask},r.a.createElement(Bt.a,{color:"primary"})):r.a.createElement(ce,{tip:"Complete",onClick:this.completeTask},r.a.createElement(Rt.a,{color:"primary"})):r.a.createElement(c.b,{to:"/login"},r.a.createElement(ce,{tip:"Complete"},r.a.createElement(Rt.a,{color:"primary"})))}}]),a}(n.Component),Lt={completeTask:function(e){return function(t){h.a.get("/task/".concat(e,"/complete")).then((function(a){t({type:D,payload:Object(v.a)(Object(v.a)({},a.data),{},{taskId:e})})})).catch((function(e){return console.log(e)}))}},undoCompleteTask:function(e){return function(t){h.a.get("/task/".concat(e,"/undo_complete")).then((function(a){t({type:W,payload:Object(v.a)(Object(v.a)({},a.data),{},{taskId:e})})})).catch((function(e){return console.log(e)}))}}},Vt=Object(f.b)((function(e){return{user:e.user}}),Lt)(re()({})(Gt)),Kt=new(a(224).Parser),Jt=Object(Xe.a)((function(e){return{htmlContainer:{}}})),Yt=function(e){var t=e.html,a=Jt(),n=Kt.parse(t);return r.a.createElement("div",{className:a.htmlContainer},n)},qt=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(X.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"render",value:function(){De.a.extend(Pe.a);var e,t,a=this.props,n=a.classes,o=a.task,l=o.body,s=o.createdAt,i=o.userImage,u=o.userHandle,m=o.taskId,p=o.pinToTop,d=a.user,h=d.authenticated,f=d.credentials.handle,b=a.openDialog,E=h&&u===f?r.a.createElement(Qe,{taskId:m}):null,g=h&&u===f?r.a.createElement(Ke,{taskId:m,userHandle:u}):null,v=h&&u===f?r.a.createElement(dt,{taskId:m,userHandle:u}):null,y=h&&u===f?r.a.createElement(Ft,{taskId:m,pinToTop:p}):null,k=r.a.createElement(Vt,{taskId:m,user:this.props.user}),O=r.a.createElement(st.a,{component:c.b,to:"/users/".concat(u),color:"primary"},u);if(l.startsWith("/url")){var C=l.substring(4).trim();t=C,e=r.a.createElement(nt,{src:C})}else if(l.startsWith("/html")){var j=l.substring(5).trim();e=r.a.createElement(Yt,{html:j}),t=j.replaceAll(/<[^>]*>/g,"")}else e=r.a.createElement(ft.a,{source:Et(l),className:n.markdownContainer}),t=l;var w=r.a.createElement(Ot,{taskId:m,content:t}),N=r.a.createElement(it.a,{classes:n.buttonGroup},w,g,y,v,E,k);return r.a.createElement(ot.a,{className:Object(Fe.default)(n.card,Object(ue.a)({},n.cardPinToTop,p))},r.a.createElement(lt.a,{avatar:r.a.createElement(rt.a,{alt:u,className:n.avatar,src:i}),title:O,subheader:De()(s).fromNow()}),r.a.createElement(gt.a,{className:n.content},r.a.createElement(st.a,{id:"content-"+m},e)),r.a.createElement(ct.a,{className:n.actions},N),r.a.createElement(Ut,{taskId:m,openDialog:b}))}}]),a}(n.Component),Ht=Object(f.b)((function(e){return{user:e.user}}))(re()((function(e){return{card:{marginBottom:20,position:"relative"},cardPinToTop:{"background-color":"cornsilk"},image:{minWidth:200},content:{padding:25,objectFit:"cover"},actions:{display:"block"},markdownContainer:{h2:{fontSize:"1em"},"& img":{width:"100%"},"& a":{"white-space":"pre-wrap","word-wrap":"break-word"}}}}))(qt)),Qt=re()((function(e){return{container:{height:"100%",position:"fixed"},spinnerDiv:{textAlign:"center"}}}))((function(e){var t=e.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(Ct.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",className:t.container},r.a.createElement(Ct.a,{item:!0,xs:4}),r.a.createElement(Ct.a,{item:!0,className:t.spinnerDiv,xs:4},r.a.createElement(ve.a,null))))})),Zt=a(483),Xt=a(480),_t=a(481),$t=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={taskId:null,showCompleted:!1},e.onShowCompletedChange=function(t){e.setState(Object(ue.a)({},t.target.name,t.target.checked))},e}return Object(_.a)(a,[{key:"taskCompleted",value:function(e){return!(!this.props.user.taskCompletions||!this.props.user.taskCompletions.find((function(t){return t.taskId===e})))}},{key:"componentDidMount",value:function(){this.props.getTasks();var e=this.props.match.params.taskId;console.log(e),e&&this.setState({taskId:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.taskId,o=t.showCompleted,l=this.props.data,c=l.tasks;return l.loading?r.a.createElement(Qt,null):r.a.createElement(n.Fragment,null,r.a.createElement(Xt.a,{row:!0},r.a.createElement(_t.a,{control:r.a.createElement(Zt.a,{checked:o,onChange:this.onShowCompletedChange,name:"showCompleted"}),label:"Show Completed Tasks"})),a?c.filter((function(e){return e.taskId===a})).map((function(e){return r.a.createElement(Ht,{key:e.taskId,task:e})})):c.filter((function(t){return!t.isArchived&&(o||!e.taskCompleted(t.taskId))})).map((function(e){return a&&e.taskId===a?r.a.createElement(Ht,{key:e.taskId,task:e,openDialog:!0}):r.a.createElement(Ht,{key:e.taskId,task:e})})))}}]),a}(n.Component),ea=Object(f.b)((function(e){return{data:e.data,user:e.user}}),{getTasks:me})($t),ta="data:image/png;base64,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",aa=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t={email:n.state.email,password:n.state.password};n.props.loginUser(t,n.props.history)},n.handleChange=function(e){n.setState(Object(ue.a)({},e.target.name,e.target.value))},n.state={email:"",password:"",errors:[]},n}return Object(_.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors;return r.a.createElement(Ct.a,{container:!0,className:t.form},r.a.createElement(Ct.a,{item:!0,sm:!0}),r.a.createElement(Ct.a,{item:!0,sm:!0},r.a.createElement("img",{src:ta,alt:"h2",className:t.image}),r.a.createElement(st.a,{variant:"h2",className:t.pageTitle},"Login"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement(fe.a,{id:"email",name:"email",label:"Email",className:t.textField,helperText:n.email,error:!!n.email,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(fe.a,{id:"password",name:"password",label:"Password",type:"password",className:t.textField,helperText:n.password,error:!!n.password,value:this.state.password,onChange:this.handleChange,fullWidth:!0}),n.general&&r.a.createElement(st.a,{variant:"body2",className:t.customError},n.general),r.a.createElement(he.a,{type:"submit",variant:"contained",color:"primary",className:t.button,disabled:a},"Login",a&&r.a.createElement(ve.a,{className:t.progress,size:30})),r.a.createElement("br",null),r.a.createElement("small",null,"don't have an account ? signup ",r.a.createElement(c.b,{to:"/signup"},"here")))),r.a.createElement(Ct.a,{item:!0,sm:!0}))}}]),a}(n.Component),na=Object(f.b)((function(e){return{UI:e.UI}}),{loginUser:function(e,t){return function(a){a({type:I}),H.a.auth().signInWithEmailAndPassword(e.email,e.password).then((function(e){return e.user.getIdToken()})).then((function(e){Q(e),a(Z()),a({type:A}),t.push("/")})).catch((function(e){console.log(e),a({type:w,payload:e.response.data})}))}}})(re()((function(e){return Object(v.a)({},e.rootStyles)}))(aa)),ra=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),n.setState({loading:!0});var t={email:n.state.email,password:n.state.password,confirmPassword:n.state.confirmPassword,handle:n.state.handle};n.props.signupUser(t,n.props.history)},n.handleChange=function(e){n.setState(Object(ue.a)({},e.target.name,e.target.value))},n.state={email:"",password:"",confirmPassword:"",handle:"",errors:[]},n}return Object(_.a)(a,[{key:"componentWillReceiveProps",value:function(e,t){e.UI.errors&&this.setState({errors:e.UI.errors})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.UI.loading,n=this.state.errors;return r.a.createElement(Ct.a,{container:!0,className:t.form},r.a.createElement(Ct.a,{item:!0,sm:!0}),r.a.createElement(Ct.a,{item:!0,sm:!0},r.a.createElement("img",{src:ta,alt:"h2",className:t.image}),r.a.createElement(st.a,{variant:"h2",className:t.pageTitle},"Signup"),r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement(fe.a,{id:"email",name:"email",label:"Email",className:t.textField,helperText:n.email,error:!!n.email,value:this.state.email,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(fe.a,{id:"password",name:"password",label:"Password",type:"password",className:t.textField,helperText:n.password,error:!!n.password,value:this.state.password,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(fe.a,{id:"confirmPassword",name:"confirmPassword",label:"Confirm Password",type:"password",className:t.textField,helperText:n.password,error:!!n.confirmPassword,value:this.state.confirmPassword,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(fe.a,{id:"handle",name:"handle",label:"Username",type:"text",className:t.textField,helperText:n.handle,error:!!n.handle,value:this.state.handle,onChange:this.handleChange,fullWidth:!0}),n.general&&r.a.createElement(st.a,{variant:"body2",className:t.customError},n.general),r.a.createElement(he.a,{type:"submit",variant:"contained",color:"primary",className:t.button,disabled:a},"Login",a&&r.a.createElement(ve.a,{className:t.progress,size:30})),r.a.createElement("br",null),r.a.createElement("small",null,"Already have an account ? login ",r.a.createElement(c.b,{to:"/login"},"here")))),r.a.createElement(Ct.a,{item:!0,sm:!0}))}}]),a}(n.Component),oa=Object(f.b)((function(e){return{user:e.user,UI:e.UI}}),{signupUser:function(e,t){return function(a){a({type:I}),h.a.post("/signup",e).then((function(e){var n=e.data;Q(n.token),a(Z()),a({type:A}),t.push("/")})).catch((function(e){console.log(e),a({type:w,payload:e.response.data})}))}}})(re()((function(e){return Object(v.a)({},e.rootStyles)}))(ra)),la=a.p+"static/media/no-img.c3f94521.png",ca=a(231),sa=a(117),ia=a.n(sa),ua=a(118),ma=a.n(ua),pa=a(119),da=a.n(pa),ha=re()((function(e){return Object(v.a)(Object(v.a)({},e.rootStyles),{},{handle:{height:20,backgroundColor:e.palette.primary.main,width:60,margin:"0 auto 7px auto"},fullLine:{height:15,backgroundColor:"rgba(0,0,0,0.6)",width:"100%",marginBottom:10},halfLine:{height:15,backgroundColor:"rgba(0,0,0,0.6)",width:"50%",marginBottom:10}})}))((function(e){var t=e.classes;return r.a.createElement(ca.a,{className:t.paper},r.a.createElement("div",{className:t.profile},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{src:la,alt:"profile",className:"profile-image"})),r.a.createElement("hr",null),r.a.createElement("div",{className:"profile-details"},r.a.createElement("div",{className:t.handle}),r.a.createElement("hr",null),r.a.createElement("div",{className:t.fullLine}),r.a.createElement("div",{className:t.fullLine}),r.a.createElement("hr",null),r.a.createElement(ia.a,{color:"primary"}),r.a.createElement("span",null,"Location"),r.a.createElement("hr",null),r.a.createElement(ma.a,{color:"primary"}),"https://website.com",r.a.createElement("hr",null),r.a.createElement(da.a,{color:"primary"}),"Join date")))})),fa=a(482),ba=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={bio:"",website:"",location:"",open:!1},e.handleClose=function(){e.setState({open:!1})},e.mapUserDetailsToState=function(t){e.setState({bio:t.bio?t.bio:"",website:t.website?t.website:"",location:t.location?t.location:""})},e.handleOpen=function(){e.setState({open:!0}),e.mapUserDetailsToState(e.props.credentials)},e.handleChange=function(t){e.setState(Object(ue.a)({},t.target.name,t.target.value))},e.handleSubmit=function(){var t={bio:e.state.bio,website:e.state.website,location:e.state.location};e.props.editUserDetails(t),e.handleClose()},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.credentials;this.mapUserDetailsToState(e)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(n.Fragment,null,r.a.createElement(ce,{tip:"Edit details",onClick:this.handleOpen,btnClassName:e.button},r.a.createElement(Re.a,{color:"primary"})),r.a.createElement(be.a,{open:this.state.open,onClose:this.handleClose,fullWidth:!0,maxWidth:"sm"},r.a.createElement(ge.a,null,"Edit your details"),r.a.createElement(Ee.a,null,r.a.createElement("form",null,r.a.createElement(fe.a,{name:"bio",type:"text",label:"Bio",multiline:!0,rows:"3",placeholder:"A short bio of yourself",className:e.textField,value:this.state.bio,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(fe.a,{name:"website",type:"text",label:"Website",multiline:!0,placeholder:"Your personal website",className:e.textField,value:this.state.website,onChange:this.handleChange,fullWidth:!0}),r.a.createElement(fe.a,{name:"location",type:"text",label:"Location",multiline:!0,placeholder:"Where you live",className:e.textField,value:this.state.location,onChange:this.handleChange,fullWidth:!0}))),r.a.createElement(Je.a,null,r.a.createElement(he.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(he.a,{onClick:this.handleSubmit,color:"primary"},"Submit"))))}}]),a}(n.Component),Ea=Object(f.b)((function(e){return{credentials:e.user.credentials}}),{editUserDetails:function(e){return function(t){t({type:C}),h.a.post("/user",e).then((function(){t(Z())})).catch((function(e){return console.log(e)}))}}})(re()((function(e){return Object(v.a)(Object(v.a)({},e.rootStyles),{},{button:{float:"right"}})}))(ba)),ga=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(e){var n;return Object(X.a)(this,a),(n=t.call(this,e)).handleImageChange=function(e){var t=e.target.files[0],a=new FormData;a.append("image",t,t.name),n.props.uploadImage(a)},n.handleEditPicture=function(){n.imageButtonRef.current.click()},n.handleLogout=function(){n.props.logoutUser()},n.imageButtonRef=r.a.createRef(),n}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.user,o=a.credentials,l=o.handle,s=o.createdAt,i=o.imageUrl,u=o.bio,m=o.website,p=o.location,d=a.loading,h=a.authenticated;return d?r.a.createElement(ha,null):h?r.a.createElement(ca.a,{className:t.paper},r.a.createElement("div",{className:t.profile},r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{src:i,alt:"profile",className:"profile-image"}),r.a.createElement("input",{type:"file",id:"imageInput",hidden:"hidden",onChange:this.handleImageChange,ref:this.imageButtonRef}),r.a.createElement(ce,{tip:"Edit profile picture",onClick:this.handleEditPicture,btnClassName:"button"},r.a.createElement(Re.a,{color:"primary"}))),r.a.createElement("hr",null),r.a.createElement("div",{className:"profile-details"},r.a.createElement(fa.a,{component:c.b,to:"/users/".concat(l),color:"primary",variant:"h5"},"@",l),u&&r.a.createElement(st.a,{variant:"body2"},u),r.a.createElement("hr",null),p&&r.a.createElement(n.Fragment,null,r.a.createElement(ia.a,{color:"primary"}),r.a.createElement("span",null,p)),r.a.createElement("hr",null),m&&r.a.createElement(n.Fragment,null,r.a.createElement(ma.a,{color:"primary"}),r.a.createElement("a",{href:m,target:"_blank",rel:"noopener noreferrer"},"  ",m)),r.a.createElement("hr",null),r.a.createElement(da.a,{color:"primary"}),"  ",r.a.createElement("span",null,"Joined ",De()(s).format("MMM YYYY")))),r.a.createElement(oe.a,{title:"Logout",placement:"top"},r.a.createElement(ce,{tip:"Logout",onClick:this.handleLogout},r.a.createElement(tt.a,{color:"primary"}))),r.a.createElement(Ea,null)):r.a.createElement(ca.a,{className:t.paper},r.a.createElement(st.a,{variant:"body2",aligh:"center"},"No profile found, please login again"),r.a.createElement("div",{className:t.buttons},r.a.createElement(he.a,{variant:"contained",color:"primary",component:c.b,to:"/login"},"Login"),r.a.createElement(he.a,{variant:"contained",color:"secondary",component:c.b,to:"/signup"},"Signup")))}}]),a}(n.Component),va=Object(f.b)((function(e){return{user:e.user}}),{logoutUser:function(){return function(e){H.a.auth().signOut().then((function(){e({type:k})}))}},uploadImage:function(e){return function(t){t({type:C}),h.a.post("/user/image",e).then((function(e){t(Z())})).catch((function(e){return console.log(e)}))}}})(re()((function(e){return Object(v.a)({},e.rootStyles)}))(ga)),ya=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={profile:{},taskIdParam:null},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.handle,a=this.props.match.params.taskId;a&&this.setState({taskIdParam:a}),this.props.getUserData(t),h.a.get("/user/".concat(t)).then((function(t){e.setState({profile:t.data.user})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.props.data,t=e.tasks,a=e.loading,n=this.state.taskIdParam,o=a?r.a.createElement(Qt,null):null===t?r.a.createElement("p",null,"No tasks from this user"):n?t.map((function(e){return e.taskId!==n?r.a.createElement(Ht,{key:e.taskId,task:e}):r.a.createElement(Ht,{key:e.taskId,task:e,openDialog:!0})})):t.map((function(e){return r.a.createElement(Ht,{key:e.taskId,task:e})}));return r.a.createElement(Ct.a,{container:!0,spacing:10},r.a.createElement(Ct.a,{item:!0,sm:8,xs:12},o),r.a.createElement(Ct.a,{item:!0,sm:4,xs:12},this.state.profile?r.a.createElement(va,null):r.a.createElement(ha,null)))}}]),a}(n.Component),ka=Object(f.b)((function(e){return{data:e.data,UI:e.UI}}),{getUserData:function(e){return function(t){t({type:N}),h.a.get("/user/".concat(e)).then((function(e){t({type:T,payload:e.data.tasks})})).catch((function(){t({type:T,payload:[]})}))}}})(ya),Oa=a(51),Ca=a(159),ja=a.n(Ca),wa=(a(427),a(228));var Na=new Date,Ia=Object(Oa.c)(ja.a),Aa=/(\d{2})\/(\d{2})\/(\d{4})/g,Sa=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){var e;Object(X.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={view:Oa.b.WEEK,events:[]},e}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vQvXCDvZBgp4hm89EvIzlKfiJpbkZDaK5dFYqVYYDJUZ4zGknXkOeUaT5xlGk5pyfL3G8Qfrp2TDZxJ/pub?output=csv").then((function(e){return e.text()})).then((function(t){var a,n=(a=function(e){var t,a,n="",r=[""],o=[r],l=0,c=0,s=!0,i=Object(wa.a)(e);try{for(i.s();!(a=i.n()).done;)'"'===(t=a.value)?(s&&t===n&&(r[l]+=t),s=!s):","===t&&s?t=r[++l]="":"\n"===t&&s?("\r"===n&&(r[l]=r[l].slice(0,-1)),r=o[++c]=[t=""],l=0):r[l]+=t,n=t}catch(u){i.e(u)}finally{i.f()}return o}(t),a[0].map((function(e,t){return a.map((function(e){return e[t]}))}))).flat(),r=[];n.forEach((function(e,t){if(e.match(Aa)){var a=Aa.exec(e),o=parseInt(a[1]),l=parseInt(a[2]),c=parseInt(a[3]),s=n[t+1];if(s){var i=new Date(c,o-1,l),u=new Date(c,o-1,l);s.includes("\u9884\u67e5\u5e26\u9886")?(s="\u9884\u67e5\n"+s,i=new Date(c,o-1,l,11,15,0),u=new Date(c,o-1,l,12,15,0)):s.includes("\u8bd7\u6b4c\u5e26\u9886")&&(s="\u56e2\u5951\u67e5\u7ecf\n"+s,i=new Date(c,o-1,l,19,20,0),u=new Date(c,o-1,l,21,30,0));var m={id:t,title:s,start:i,end:u};r.push(m)}}})),e.setState({events:r})}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.events,n=[Oa.b.MONTH,Oa.b.WEEK,Oa.b.DAY,Oa.b.AGENDA];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.container},r.a.createElement(Oa.a,{events:a,views:n,defaultView:Oa.b.WEEK,step:60,defaultDate:Na,components:{eventWrapper:function(e){var a=Math.floor((e.event.end-e.event.start)/6e4);return r.a.createElement("div",{className:a<60?t.eventWrapperNoLabel:t.eventWrapper},e.children)}},localizer:Ia,style:{height:1e3},titleAccessor:function(a){if(e.state.view===Oa.b.MONTH){var n=a.title.split("\n");return r.a.createElement("div",{className:t.eventContent},n[0])}return r.a.createElement("div",{className:t.eventContent},a.title)},onView:function(t){e.setState({view:t})},min:ja()("6:00am","h:mma").toDate()})))}}]),a}(n.Component),Ta=Object(f.b)((function(e){return{user:e.user}}))(re()((function(){return{container:{},eventContent:{"white-space":"pre-wrap"},eventWrapper:{},eventWrapperNoLabel:{"& .rbc-event-label":{display:"none"}}}}))(Sa)),xa=function(e){Object($.a)(a,e);var t=Object(ee.a)(a);function a(){return Object(X.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ta,null))}}]),a}(n.Component),Ua=Object(f.b)((function(e){return{data:e.data}}),{getAnnouncements:me})(xa),Da=(a(428),m()(p));H.a.apps.length?H.a.app():H.a.initializeApp({apiKey:"AIzaSyCCx9TDJtVzEaPym1OyU5KSuWgwslGDzEY"}),H.a.auth().onAuthStateChanged((function(e){e&&e.getIdToken().then((function(e){Q(e),q.dispatch(Z())}))})),h.a.defaults.baseURL="https://us-central1-h2-app.cloudfunctions.net/api";var Wa=function(){return r.a.createElement(i.a,{theme:Da},r.a.createElement(f.a,{store:q},r.a.createElement(c.a,{basename:"/eccbibleplan"},r.a.createElement(Se,null),r.a.createElement("div",{className:"container"},r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:ea}),r.a.createElement(s.b,{exact:!0,path:"/task/:taskId",component:ea}),r.a.createElement(xe,{exact:!0,path:"/login",component:na}),r.a.createElement(xe,{exact:!0,path:"/signup",component:oa}),r.a.createElement(s.b,{exact:!0,path:"/users/:handle",component:ka}),r.a.createElement(s.b,{exact:!0,path:"/users/:handle/task/:taskId",component:ka}),r.a.createElement(s.b,{exact:!0,path:"/cal",component:Ua}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Wa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[430,1,2]]]);
//# sourceMappingURL=main.05bedf29.chunk.js.map